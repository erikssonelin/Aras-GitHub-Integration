<?xml version="1.0" encoding="UTF-8"?>
<AML version="15.0 SP2">
  <Item type="ItemType" action="add">
    <id>GIT_Configuration</id>
    <name>GIT_Configuration</name>
    <label>GitHub Configuration</label>
    <label_plural>GitHub Configurations</label_plural>
    <implementation_type>table</implementation_type>

    <Relationships>
      <!-- Configuration Name -->
      <Item type="Property" action="add">
        <name>name</name>
        <label>Configuration Name</label>
        <data_type>string</data_type>
        <is_indexed>1</is_indexed>
        <keyed_name_order>1</keyed_name_order>
        <stored_length>64</stored_length>
        <is_required>1</is_required>
      </Item>

      <!-- GitHub Token (encrypted) -->
      <Item type="Property" action="add">
        <name>personal_access_token</name>
        <label>Personal Access Token</label>
        <data_type>string</data_type>
        <is_hidden>0</is_hidden>
        <stored_length>256</stored_length>
      </Item>

      <!-- API URL -->
      <Item type="Property" action="add">
        <name>api_url</name>
        <label>GitHub API URL</label>
        <data_type>string</data_type>
        <default_value>https://api.github.com</default_value>
        <stored_length>256</stored_length>
      </Item>

      <!-- Webhook Secret -->
      <Item type="Property" action="add">
        <name>webhook_secret</name>
        <label>Webhook Secret</label>
        <data_type>string</data_type>
        <is_hidden>1</is_hidden>
        <stored_length>128</stored_length>
      </Item>

      <!-- Active Flag -->
      <Item type="Property" action="add">
        <name>is_active</name>
        <label>Active</label>
        <data_type>boolean</data_type>
        <default_value>1</default_value>
      </Item>

      <!-- Default Flag -->
      <Item type="Property" action="add">
        <name>is_default</name>
        <label>Default Configuration</label>
        <data_type>boolean</data_type>
        <default_value>0</default_value>
      </Item>

      <!-- TOC Access -->
      <Item type="TOC Access" action="add">
        <related_id keyed_name="Administrators" type="Identity">
          <Item type="Identity" action="get">
            <name>Administrators</name>
          </Item>
        </related_id>
        <category>Administration</category>
      </Item>
    </Relationships>
  </Item>
</AML>
